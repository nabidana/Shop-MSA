apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Base 참조
bases:
  - ../../base

# 네임스페이스 suffix 추가 (선택사항)
# nameSuffix: -dev

# 개발환경 레이블 추가
commonLabels:
  environment: development

# 이미지 태그 오버라이드 (개발 이미지 사용)
images:
  - name: api-gateway
    newName: your-registry/api-gateway
    newTag: dev-latest
  - name: user-service
    newName: your-registry/user-service
    newTag: dev-latest
  - name: payment-service
    newName: your-registry/payment-service
    newTag: dev-latest
  - name: settlement-service
    newName: your-registry/settlement-service
    newTag: dev-latest
  - name: partner-service
    newName: your-registry/partner-service
    newTag: dev-latest
  - name: accounting-service
    newName: your-registry/accounting-service
    newTag: dev-latest

# 패치 적용
patchesStrategicMerge:
  - patches/replica-patch.yaml
  - patches/resource-patch.yaml
  - patches/service-patch.yaml

# ConfigMap 생성 (개발환경 설정)
configMapGenerator:
  - name: app-config
    literals:
      - SPRING_PROFILES_ACTIVE=dev
      - LOG_LEVEL=DEBUG

# Secret 생성 (개발환경용 - 실제 운영시 별도 관리 필요)
secretGenerator:
  - name: postgres-secret
    behavior: merge
    literals:
      - postgres-password=dev_postgres_password
      - userservice-password=dev_user_password
      - paymentservice-password=dev_payment_password
      - settlementservice-password=dev_settlement_password
      - partnerservice-password=dev_partner_password
      - accountingservice-password=dev_accounting_password

# API Gateway 리소스 조정
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-gateway
  namespace: shop-msa
spec:
  template:
    spec:
      containers:
      - name: api-gateway
        resources:
          requests:
            memory: "256Mi"  # 개발환경은 리소스 요구량 감소
            cpu: "100m"
          limits:
            memory: "512Mi"
            cpu: "250m"

---
# User Service 리소스 조정
apiVersion: apps/v1
kind: Deployment
metadata:
  name: user-service
  namespace: shop-msa
spec:
  template:
    spec:
      containers:
      - name: user-service
        resources:
          requests:
            memory: "256Mi"
            cpu: "100m"
          limits:
            memory: "512Mi"
            cpu: "250m"

---
# Payment Service 리소스 조정
apiVersion: apps/v1
kind: Deployment
metadata:
  name: payment-service
  namespace: shop-msa
spec:
  template:
    spec:
      containers:
      - name: payment-service
        resources:
          requests:
            memory: "512Mi"
            cpu: "250m"
          limits:
            memory: "1Gi"
            cpu: "500m"

---
# Settlement Service 리소스 조정
apiVersion: apps/v1
kind: Deployment
metadata:
  name: settlement-service
  namespace: shop-msa
spec:
  template:
    spec:
      containers:
      - name: settlement-service
        resources:
          requests:
            memory: "512Mi"
            cpu: "250m"
          limits:
            memory: "1Gi"
            cpu: "500m"

---
# Partner Service 리소스 조정
apiVersion: apps/v1
kind: Deployment
metadata:
  name: partner-service
  namespace: shop-msa
spec:
  template:
    spec:
      containers:
      - name: partner-service
        resources:
          requests:
            memory: "256Mi"
            cpu: "100m"
          limits:
            memory: "512Mi"
            cpu: "250m"

---
# Accounting Service 리소스 조정
apiVersion: apps/v1
kind: Deployment
metadata:
  name: accounting-service
  namespace: shop-msa
spec:
  template:
    spec:
      containers:
      - name: accounting-service
        resources:
          requests:
            memory: "512Mi"
            cpu: "250m"
          limits:
            memory: "1Gi"
            cpu: "500m"

---
# PostgreSQL 리소스 조정
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: postgresql
  namespace: shop-msa
spec:
  template:
    spec:
      containers:
      - name: postgresql
        resources:
          requests:
            memory: "256Mi"
            cpu: "100m"
          limits:
            memory: "512Mi"
            cpu: "250m"
  volumeClaimTemplates:
  - metadata:
      name: data
    spec:
      resources:
        requests:
          storage: 5Gi  # 개발환경은 작은 스토리지

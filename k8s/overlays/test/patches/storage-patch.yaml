# 테스트 환경 스토리지 크기 설정 (작은 크기)

---
# PostgreSQL 스토리지
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: postgresql
  namespace: shop-msa
spec:
  volumeClaimTemplates:
  - metadata:
      name: data
    spec:
      accessModes: [ "ReadWriteOnce" ]
      resources:
        requests:
          storage: 2Gi  # 테스트는 작은 스토리지

---
# Redis Master 스토리지
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: redis-master
  namespace: shop-msa
spec:
  volumeClaimTemplates:
  - metadata:
      name: data
    spec:
      accessModes: [ "ReadWriteOnce" ]
      resources:
        requests:
          storage: 1Gi

---
# Redis Replica 스토리지
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: redis-replica
  namespace: shop-msa
spec:
  volumeClaimTemplates:
  - metadata:
      name: data
    spec:
      accessModes: [ "ReadWriteOnce" ]
      resources:
        requests:
          storage: 1Gi

---
# Zookeeper 스토리지
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: zookeeper
  namespace: shop-msa
spec:
  volumeClaimTemplates:
  - metadata:
      name: data
    spec:
      accessModes: [ "ReadWriteOnce" ]
      resources:
        requests:
          storage: 1Gi
  - metadata:
      name: datalog
    spec:
      accessModes: [ "ReadWriteOnce" ]
      resources:
        requests:
          storage: 1Gi

---
# Kafka 스토리지
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: kafka
  namespace: shop-msa
spec:
  volumeClaimTemplates:
  - metadata:
      name: data
    spec:
      accessModes: [ "ReadWriteOnce" ]
      resources:
        requests:
          storage: 3Gi

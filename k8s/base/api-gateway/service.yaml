apiVersion: v1
kind: Service
metadata:
  name: api-gateway
  namespace: microservices
  labels:
    app: api-gateway
    tier: gateway
spec:
  type: LoadBalancer  # 외부 노출용 (개발환경에서는 NodePort로 오버라이드 가능)
  selector:
    app: api-gateway
  ports:
  - name: http
    port: 80         # 외부 포트
    targetPort: 8080 # 컨테이너 포트
    protocol: TCP
  sessionAffinity: ClientIP  # 세션 유지를 위한 설정

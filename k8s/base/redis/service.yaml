apiVersion: v1
kind: Service
metadata:
  name: redis-master
  labels:
    app: redis
    role: master
spec:
  clusterIP: None  # Headless Service (StatefulSet용)
  ports:
  - port: 6379
    targetPort: 6379
    name: redis
  selector:
    app: redis
    role: master
---
apiVersion: v1
kind: Service
metadata:
  name: redis-slave
  labels:
    app: redis
    role: slave
spec:
  clusterIP: None  # Headless Service
  ports:
  - port: 6379
    targetPort: 6379
    name: redis
  selector:
    app: redis
    role: slave
---
apiVersion: v1
kind: Service
metadata:
  name: redis-sentinel
  labels:
    app: redis
    role: sentinel
spec:
  type: ClusterIP
  ports:
  - port: 26379
    targetPort: 26379
    name: sentinel
  selector:
    app: redis
    role: sentinel
---
# 읽기 전용 Redis Service (Slave에 연결)
apiVersion: v1
kind: Service
metadata:
  name: redis-read
  labels:
    app: redis
spec:
  type: ClusterIP
  ports:
  - port: 6379
    targetPort: 6379
    name: redis
  selector:
    app: redis
    role: slave

# Service: Pod들을 외부 또는 다른 Pod에 노출
# ClusterIP: 클러스터 내부에서만 접근 가능 (기본값)
# NodePort: 노드의 특정 포트로 외부 접근 가능
# LoadBalancer: 클라우드의 LB를 통해 외부 접근
# Headless Service (clusterIP: None): DNS만 제공, 로드밸런싱 없음
apiVersion: v1
kind: Service
metadata:
  name: postgres-service
  namespace: shop-msa
spec:
  selector:
    app: postgres  # 이 레이블을 가진 Pod들에게 트래픽 전달
  ports:
  - port: 5432          # Service가 노출하는 포트
    targetPort: 5432    # Pod의 실제 포트
  clusterIP: None  
# Headless Service: 로드밸런싱 없이 Pod IP를 직접 반환
# StatefulSet에서 각 Pod에 고정 DNS를 제공하기 위해 사용
# postgres-0.postgres-service.payment-msa.svc.cluster.local